<title>Lines</title>
<style>
  body {
    max-width: 640px;
    margin: 10px auto;
  }
</style>

<a href="" id="save">
  <canvas id="viewport" width="640" height="480"></canvas>
</a>

<script>

var ctx = viewport.getContext('2d');
ctx.lineWidth = 3;
var width = viewport.width;
var height = viewport.height;

function random(max) {
  return Math.floor(Math.random() * max);
}

// Between 5 and 10 lines
var lineCount = 5 + random(5);

var colors = ['deeppink', 'darkorange', 'lime'];

for (var i = 0; i < lineCount; i++) {
  var color = colors[random(colors.length)];
  var startX = random(width);
  var startY = random(height / 2);
  var endX = random(width);
  var endY = random(height / 2) + (height / 2);
  ctx.strokeStyle = color;
  ctx.beginPath();
  ctx.moveTo(startX, startY);
  ctx.lineTo(endX, endY);
  ctx.stroke();
}

save.onclick = function() {
  window.location = viewport.toDataURL('image/png');
  return false;
};

</script>
